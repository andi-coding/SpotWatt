name = "spotwatt-prices"
main = "src/index.js"
compatibility_date = "2024-01-17"

# wrangler.toml (wrangler v3.88.0^)
[observability.logs]
enabled = true

# Environment variables
[vars]
# ENTSOE_API_TOKEN wird als Secret hinzugefügt mit:
# npx wrangler secret put ENTSOE_API_TOKEN

# KV Namespace für Caching
# Erstellen mit: npx wrangler kv:namespace create "PRICE_CACHE"
# Dann die generierte ID hier eintragen
[[kv_namespaces]]
binding = "PRICE_CACHE"
id = "51ae355e5c7749e1915440c1337170d8"

# Cron Triggers - ENTSO-E publiziert Day-Ahead Preise täglich um 12:30 CET/CEST
# Erster Versuch um 12:00 UTC, dann Fallbacks alle 30 Min
[triggers]
crons = [
  "0 12 * * *",   # 12:00 UTC = 13:00 CET / 14:00 CEST
  "30 12 * * *",  # 12:30 UTC = 13:30 CET / 14:30 CEST
  "0 13 * * *",   # 13:00 UTC = 14:00 CET / 15:00 CEST
  "30 13 * * *",  # 13:30 UTC = 14:30 CET / 15:30 CEST
  "0 15 * * *"    # 15:00 UTC = 16:00 CET / 17:00 CEST
]